!function(e,t){if(typeof exports==="object"&&typeof module==="object"){module.exports=t()}else if(typeof define==="function"&&define.amd){define([],t)}else if(typeof exports==="object"){exports["events"]=t()}else if(typeof bommon==="object"&&bommon!==null&&typeof bommon.register==="function"){bommon.register("events",function(e){e.exports=t()})}else{e.nodejs=e.nodejs||{};e.nodejs["events"]=t()}}(this,function(){"use strict";var v=Function.prototype.apply;var f;function p(){p.init.call(this)}p.EventEmitter=p;p.usingDomains=false;p.prototype._events=undefined;p.prototype._eventsCount=0;p.prototype._maxListeners=undefined;var t=10;function u(e){if(typeof e!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof value)}}try{Object.defineProperty(p,"defaultMaxListeners",{enumerable:true,get:function(){return t},set:function(e){if(typeof e!=="number"||e<0||isNaN(e)){throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e)}t=e}})}catch(m){p.defaultMaxListeners=t}p.init=function(){try{if(this._events===undefined||this._events===Object.getPrototypeOf(this)._events){this._events=Object.create(null);this._eventsCount=0}}catch(m){if(this._events===undefined){this._events={};this._eventsCount=0}}this._maxListeners=this._maxListeners||undefined};p.prototype.setMaxListeners=function g(e){if(typeof e!=="number"||e<0||isNaN(e)){throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e)}this._maxListeners=e;return this};function a(e){if(e._maxListeners===undefined)return p.defaultMaxListeners;return e._maxListeners}p.prototype.getMaxListeners=function L(){return a(this)};function l(e,t){for(var n=0;n<e.length-3;n++){var r=t.indexOf(e[n]);if(r!==-1){var i=t.length-r;if(i>3){var o=1;var s=Math.min(e.length-n,i);while(s>o&&e[n+o]===t[r+o]){o++}if(o>3){return[o,n]}}}}return[0,0]}function h(e,t){var n="";try{var r=this.constructor.name;if(r!=="EventEmitter")n=" on "+r+" instance"}catch(m){}var i="\nEmitted 'error' event"+n+" at:\n";var o=e.stack.split("\n").slice(1);var s=t.stack.split("\n").slice(1);var f=l(s,o);var u=f[0];var a=f[1];if(u>0){s.splice(a+1,u-2,"    [... lines matching original stack trace ...]")}return e.stack+i+s.join("\n")}p.prototype.emit=function _(){var e=arguments[0];var t=Array.prototype.slice.call(arguments,1);var n=e==="error";var r=this._events;if(r!==undefined)n=n&&r.error===undefined;else if(!n)return false;if(n){var i;if(t.length>0)i=t[0];if(i instanceof Error){try{var o={};Error.captureStackTrace(o,p.prototype.emit);Object.defineProperty(i,"kEnhanceStackBeforeInspector",{value:h.bind(this,i,o),configurable:true})}catch(m){}throw i}var s;try{s=i.toString()}catch(m){s=i}var f=new Error("Unhandled error. "+s);f.context=i;throw f}var u=r[e];if(u===undefined)return false;if(typeof u==="function"){v.call(u,this,t)}else{var a=u.length;var l=d(u,a);for(var c=0;c<a;++c)v.call(l[c],this,t)}return true};function n(e,t,n,r){var i;var o;var s;u(n);o=e._events;if(o===undefined){o=e._events=Object.create(null);e._eventsCount=0}else{if(o.newListener!==undefined){e.emit("newListener",t,n.listener?n.listener:n);o=e._events}s=o[t]}if(s===undefined){o[t]=n;++e._eventsCount}else{if(typeof s==="function"){s=o[t]=r?[n,s]:[s,n]}else if(r){s.unshift(n)}else{s.push(n)}i=a(e);if(i>0&&s.length>i&&!s.warned){s.warned=true;var f=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners "+"added to "+e+". Use "+"emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning";f.emitter=e;f.type=t;f.count=s.length;if(typeof console!=="undefined"){console.warn(f)}}}return e}p.prototype.addListener=function b(e,t){return n(this,e,t,false)};p.prototype.on=p.prototype.addListener;p.prototype.prependListener=function w(e,t){return n(this,e,t,true)};function o(e){return function t(){if(!e.fired){e.target.removeListener(e.type,e.wrapFn);e.fired=true;if(arguments.length===0)return e.listener.call(e.target);return e.listener.apply(e.target,arguments)}}}function r(e,t,n){var r={fired:false,wrapFn:undefined,target:e,type:t,listener:n};var i=o(r);i.listener=n;r.wrapFn=i;return i}p.prototype.once=function y(e,t){u(t);this.on(e,r(this,e,t));return this};p.prototype.prependOnceListener=function x(e,t){u(t);this.prependListener(e,r(this,e,t));return this};p.prototype.removeListener=function j(e,t){var n;u(t);var r=this._events;if(r===undefined)return this;var i=r[e];if(i===undefined)return this;if(i===t||i.listener===t){if(--this._eventsCount===0)this._events=Object.create(null);else{delete r[e];if(r.removeListener)this.emit("removeListener",e,i.listener||t)}}else if(typeof i!=="function"){var o=-1;for(var s=i.length-1;s>=0;s--){if(i[s]===t||i[s].listener===t){n=i[s].listener;o=s;break}}if(o<0)return this;if(o===0)i.shift();else{if(f===undefined)f=function f(t,n){for(;n+1<t.length;n++)t[n]=t[n+1];t.pop()};f(i,o)}if(i.length===1)r[e]=i[0];if(r.removeListener!==undefined)this.emit("removeListener",e,n||t)}return this};p.prototype.off=p.prototype.removeListener;p.prototype.removeAllListeners=function E(e){var t=this._events;if(t===undefined)return this;if(t.removeListener===undefined){if(arguments.length===0){this._events=Object.create(null);this._eventsCount=0}else if(t[e]!==undefined){if(--this._eventsCount===0)this._events=Object.create(null);else delete t[e]}return this}if(arguments.length===0){for(var n in t){if(Object.prototype.hasOwnProperty.call(t,n)){if(n==="removeListener")continue;this.removeAllListeners(n)}}this.removeAllListeners("removeListener");this._events=Object.create(null);this._eventsCount=0;return this}var r=t[e];if(typeof r==="function"){this.removeListener(e,r)}else if(r!==undefined){for(var i=r.length-1;i>=0;i--){this.removeListener(e,r[i])}}return this};function i(e,t,n){var r=e._events;if(r===undefined)return[];var i=r[t];if(i===undefined)return[];if(typeof i==="function")return n?[i.listener||i]:[i];return n?c(i):d(i,i.length)}p.prototype.listeners=function O(e){return i(this,e,true)};p.prototype.rawListeners=function C(e){return i(this,e,false)};p.listenerCount=function(e,t){if(typeof e.listenerCount==="function"){return e.listenerCount(t)}else{return s.call(e,t)}};p.prototype.listenerCount=s;function s(e){var t=this._events;if(t!==undefined){var n=t[e];if(typeof n==="function"){return 1}else if(n!==undefined){return n.length}}return 0}p.prototype.eventNames=function k(){return this._eventsCount>0?e(this._events):[]};function d(e,t){var n=new Array(t);for(var r=0;r<t;++r)n[r]=e[r];return n}function c(e){var t=new Array(e.length);for(var n=0;n<t.length;++n){t[n]=e[n].listener||e[n]}return t}function y(o,s){if(typeof Promise!=="function")throw new Error("Need Promise polyfill.");return new Promise(function(t,n){if(typeof o.addEventListener==="function"){o.addEventListener(s,function(){t(Array.prototype.slice.call(arguments))},{once:true});return}var r=function(){var e=Array.prototype.slice.call(arguments);if(i!==undefined){o.removeListener("error",i)}t(e)};var i;if(s!=="error"){i=function(e){o.removeListener(s,r);n(e)};o.once("error",i)}o.once(s,r)})}function e(e){var t;try{t=Reflect.ownKeys(e)}catch(m){t=[];for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){t.push(n)}}if(Object.prototype.toString.call(e)==="[object Array]"){t.push("length")}}return t}p.once=y;return p});