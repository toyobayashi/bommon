!function(e,t){var n="events";if(typeof exports==="object"&&typeof module==="object"){module.exports=t()}else if(typeof define==="function"&&define.amd){define([],t)}else if(typeof exports==="object"){exports[n]=t()}else if(typeof bommon==="object"&&bommon!==null&&typeof bommon.register==="function"){bommon.register(n,function(e){e.exports=t()})}else{e[n]=t()}}(this,function(){"use strict";var p=Function.prototype.apply;var u;function h(){h.init.call(this)}h.EventEmitter=h;h.usingDomains=false;h.prototype._events=undefined;h.prototype._eventsCount=0;h.prototype._maxListeners=undefined;var t=10;function a(e){if(typeof e!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof value)}}try{Object.defineProperty(h,"defaultMaxListeners",{enumerable:true,get:function(){return t},set:function(e){if(typeof e!=="number"||e<0||isNaN(e)){throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e)}t=e}})}catch(e){h.defaultMaxListeners=t}h.init=function(){try{if(this._events===undefined||this._events===Object.getPrototypeOf(this)._events){this._events=Object.create(null);this._eventsCount=0}}catch(e){if(this._events===undefined){this._events={};this._eventsCount=0}}this._maxListeners=this._maxListeners||undefined};h.prototype.setMaxListeners=function e(t){if(typeof t!=="number"||t<0||isNaN(t)){throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t)}this._maxListeners=t;return this};function l(e){if(e._maxListeners===undefined)return h.defaultMaxListeners;return e._maxListeners}h.prototype.getMaxListeners=function e(){return l(this)};function c(e,t){for(var n=0;n<e.length-3;n++){var r=t.indexOf(e[n]);if(r!==-1){var i=t.length-r;if(i>3){var o=1;var s=Math.min(e.length-n,i);while(s>o&&e[n+o]===t[r+o]){o++}if(o>3){return[o,n]}}}}return[0,0]}function d(e,t){var n="";try{var r=this.constructor.name;if(r!=="EventEmitter")n=" on "+r+" instance"}catch(e){}var i="\nEmitted 'error' event"+n+" at:\n";var o=e.stack.split("\n").slice(1);var s=t.stack.split("\n").slice(1);var f=c(s,o);var u=f[0];var a=f[1];if(u>0){s.splice(a+1,u-2,"    [... lines matching original stack trace ...]")}return e.stack+i+s.join("\n")}h.prototype.emit=function e(){var t=arguments[0];var n=Array.prototype.slice.call(arguments,1);var r=t==="error";var i=this._events;if(i!==undefined)r=r&&i.error===undefined;else if(!r)return false;if(r){var o;if(n.length>0)o=n[0];if(o instanceof Error){try{var s={};Error.captureStackTrace(s,h.prototype.emit);Object.defineProperty(o,"kEnhanceStackBeforeInspector",{value:d.bind(this,o,s),configurable:true})}catch(e){}throw o}var f;try{f=o.toString()}catch(e){f=o}var u=new Error("Unhandled error. "+f);u.context=o;throw u}var a=i[t];if(a===undefined)return false;if(typeof a==="function"){p.call(a,this,n)}else{var l=a.length;var c=y(a,l);for(var v=0;v<l;++v)p.call(c[v],this,n)}return true};function r(e,t,n,r){var i;var o;var s;a(n);o=e._events;if(o===undefined){o=e._events=Object.create(null);e._eventsCount=0}else{if(o.newListener!==undefined){e.emit("newListener",t,n.listener?n.listener:n);o=e._events}s=o[t]}if(s===undefined){o[t]=n;++e._eventsCount}else{if(typeof s==="function"){s=o[t]=r?[n,s]:[s,n]}else if(r){s.unshift(n)}else{s.push(n)}i=l(e);if(i>0&&s.length>i&&!s.warned){s.warned=true;var f=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners "+"added to "+e+". Use "+"emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning";f.emitter=e;f.type=t;f.count=s.length;if(typeof console!=="undefined"){console.warn(f)}}}return e}h.prototype.addListener=function e(t,n){return r(this,t,n,false)};h.prototype.on=h.prototype.addListener;h.prototype.prependListener=function e(t,n){return r(this,t,n,true)};function o(t){return function e(){if(!t.fired){t.target.removeListener(t.type,t.wrapFn);t.fired=true;if(arguments.length===0)return t.listener.call(t.target);return t.listener.apply(t.target,arguments)}}}function i(e,t,n){var r={fired:false,wrapFn:undefined,target:e,type:t,listener:n};var i=o(r);i.listener=n;r.wrapFn=i;return i}h.prototype.once=function e(t,n){a(n);this.on(t,i(this,t,n));return this};h.prototype.prependOnceListener=function e(t,n){a(n);this.prependListener(t,i(this,t,n));return this};h.prototype.removeListener=function e(t,n){var r;a(n);var i=this._events;if(i===undefined)return this;var o=i[t];if(o===undefined)return this;if(o===n||o.listener===n){if(--this._eventsCount===0)this._events=Object.create(null);else{delete i[t];if(i.removeListener)this.emit("removeListener",t,o.listener||n)}}else if(typeof o!=="function"){var s=-1;for(var f=o.length-1;f>=0;f--){if(o[f]===n||o[f].listener===n){r=o[f].listener;s=f;break}}if(s<0)return this;if(s===0)o.shift();else{if(u===undefined)u=function e(t,n){for(;n+1<t.length;n++)t[n]=t[n+1];t.pop()};u(o,s)}if(o.length===1)i[t]=o[0];if(i.removeListener!==undefined)this.emit("removeListener",t,r||n)}return this};h.prototype.off=h.prototype.removeListener;h.prototype.removeAllListeners=function e(t){var n=this._events;if(n===undefined)return this;if(n.removeListener===undefined){if(arguments.length===0){this._events=Object.create(null);this._eventsCount=0}else if(n[t]!==undefined){if(--this._eventsCount===0)this._events=Object.create(null);else delete n[t]}return this}if(arguments.length===0){for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){if(r==="removeListener")continue;this.removeAllListeners(r)}}this.removeAllListeners("removeListener");this._events=Object.create(null);this._eventsCount=0;return this}var i=n[t];if(typeof i==="function"){this.removeListener(t,i)}else if(i!==undefined){for(var o=i.length-1;o>=0;o--){this.removeListener(t,i[o])}}return this};function n(e,t,n){var r=e._events;if(r===undefined)return[];var i=r[t];if(i===undefined)return[];if(typeof i==="function")return n?[i.listener||i]:[i];return n?f(i):y(i,i.length)}h.prototype.listeners=function e(t){return n(this,t,true)};h.prototype.rawListeners=function e(t){return n(this,t,false)};h.listenerCount=function(e,t){if(typeof e.listenerCount==="function"){return e.listenerCount(t)}else{return s.call(e,t)}};h.prototype.listenerCount=s;function s(e){var t=this._events;if(t!==undefined){var n=t[e];if(typeof n==="function"){return 1}else if(n!==undefined){return n.length}}return 0}h.prototype.eventNames=function e(){return this._eventsCount>0?v(this._events):[]};function y(e,t){var n=new Array(t);for(var r=0;r<t;++r)n[r]=e[r];return n}function f(e){var t=new Array(e.length);for(var n=0;n<t.length;++n){t[n]=e[n].listener||e[n]}return t}function e(o,s){if(typeof Promise!=="function")throw new Error("Need Promise polyfill.");return new Promise(function(t,n){if(typeof o.addEventListener==="function"){o.addEventListener(s,function(){t(Array.prototype.slice.call(arguments))},{once:true});return}var r=function(){var e=Array.prototype.slice.call(arguments);if(i!==undefined){o.removeListener("error",i)}t(e)};var i;if(s!=="error"){i=function(e){o.removeListener(s,r);n(e)};o.once("error",i)}o.once(s,r)})}function v(e){var t=[];for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){t.push(n)}}return t}h.once=e;return h});